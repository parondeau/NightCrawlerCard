// Generated by CoffeeScript 1.6.2
(function() {
  (function(App) {
    var kikItCard, onSearch, restoreAppSession;

    onSearch = function(page) {
      var query;

      query = $(page).find('#venueSearchQuery').val();
      console.log($(page).find('#venueSearchQuery'));
      console.log(query);
      if (query) {
        return getBars(query, function(err, venues) {
          return venues.forEach(function(venue) {
            return console.log(render('venue_listitem', {
              name: 'Bar',
              imageUrl: null,
              description: 'Cool'
            }));
          });
        });
      }
    };
    kikItCard = function() {
      return cards.kik.send({
        title: 'test1',
        text: 'test2',
        pic: 'http://4.bp.blogspot.com/-j49xTVdZe7g/TVnmq6phXxI/AAAAAAAABpA/Pm45FErBfQQ/s400/hopkins%2Bduck.jpg',
        noForward: false,
        data: {
          some: "json"
        }
      });
    };
    App.populator("home", function(page) {
      $(page).find('#venueSearchButton').on('click', function(event) {
        return onSearch(page);
      });
      if (navigator.geolocation) {
        return navigator.geolocation.getCurrentPosition(function(success) {
          return console.log(success);
        }, function(err) {
          return console.log(err);
        });
      }
    });
    App.populator("venuePage", function(page) {
      return $(page).find('#kikBtn').on('click', kikItCard);
    });
    restoreAppSession = function() {
      var err;

      try {
        return App.restore();
      } catch (_error) {
        err = _error;
        return App.load("home");
      }
    };
    if (!cards.kik) {
      return restoreAppSession();
    } else {
      if (!cards.kik.message) {
        return restoreAppSession();
      } else {
        alert(cards.kik.message);
        return $(".specificDescriptionInner p").append("yes?");
      }
    }
  })(App);

}).call(this);
