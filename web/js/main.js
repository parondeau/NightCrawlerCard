// Generated by CoffeeScript 1.6.2
(function() {
  (function(App) {
    var err, kikItCard;

    kikItCard = function() {
      API.log("kikItCard");
      if (cards.kik) {
        API.log("Inside");
        cards.kik.send({
          title: "Test1",
          text: "Test2",
          noForward: false
        });
        return API.log("AFTER");
      }
    };
    App.populator("home", function(page) {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(success) {
          console.log(success);
          API.log("long: " + success.coords.longitude + " lat: " + success.coords.latitude);
          return cards.kik.getUser(function(user) {
            if (!user) {
              return;
            }
            user.long = success.coords.longitude;
            user.lat = success.coords.latitude;
            return updateOrAddUser(user);
          });
        }, function(err) {
          return console.log(err);
        });
      }
      $(page).find('#kikEm').on('mousedown', function(e) {
        $("#kikEm").addClass("active");
        return kikItCard();
      });
      $(page).find('#kikEm').on('touchstart', function(e) {
        $("#kikEm").addClass("active");
        return kikItCard();
      });
      $(page).find('#kikEm').on('touchend', function(e) {
        return $("#kikEm").removeClass("active");
      });
      $(page).find('#kikEm').on('mouseup', function(e) {
        return $("#kikEm").removeClass("active");
      });
      return $(page).find('#kikEm').on('mouseleave', function(e) {
        return $("#kikEm").removeClass("active");
      });
    });
    try {
      return App.restore();
    } catch (_error) {
      err = _error;
      return App.load("home");
    }
  })(App);

}).call(this);
